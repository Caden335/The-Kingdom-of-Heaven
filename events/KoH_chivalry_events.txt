namespace = chivalry

chivalry.1 = {
	type = character_event
	title = chivalry.1.t
	desc = chivalry.1.d
	theme = default
	left_portrait = {
		character = root
	}
	
	option = {
		name = chivalry.1.a
		
		add_gold = -100
		
		change_chivalry_effect = { 
			Chivalry = 1
		}
		custom_tooltip = add_1_chivalry_tt
		
		if = {
			limit = {
				has_trait = trait_generous
			}
			add_stress = -10
		}
		else_if = {
			limit = {
				has_trait = trait_greedy
			}
			add_stress = 10
		}
	}
	
	option = {
		name = chivalry.1.b
		
		add_gold = 10
		
		change_chivalry_effect = { 
			Chivalry = -1
		}
		custom_tooltip = remove_1_chivalry_tt
		
		add_tyranny = 5
		add_dread = 10
		
		if = {
			limit = {
				has_trait = trait_generous
			}
			add_stress = 10
		}
		else_if = {
			limit = {
				has_trait = trait_greedy
			}
			add_stress = -10
		}
	}
}

chivalry.2 = {
	type = character_event
	title = chivalry.2.t
	desc = chivalry.2.d
	theme = martial_chivalry_focus
	left_portrait = {
		character = root
	}
	
	right_portrait = {
		character = scope:challenger
	}

	immediate = {
		root = { random_dummy_gender_landholder_effect = yes }
        create_character = {
			age = { 20 30 }
			location = root.capital_province
			gender = scope:dummy_gender
			faith = this.faith
			culture = this.culture
			dynasty = none
			prowess = { 5 20 }
			save_scope_as = challenger
        }
	}
	
	option = {
		name = chivalry.2.a
		
		change_chivalry_effect = { 
			Chivalry = 1
		}
		custom_tooltip = add_1_chivalry_tt
		
		trigger_event = {
			id = chivalry.3
			days = 2
		}
	}
	
	option = {
		name = chivalry.2.b
		
		change_chivalry_effect = { 
			Chivalry = -1
		}
		custom_tooltip = remove_1_chivalry_tt
		
		add_prestige = -50
	}
}

chivalry.3 = {
	type = character_event
	title = chivalry.3.t
	desc = chivalry.3.d
	theme = martial_chivalry_focus
	left_portrait = {
		character = root
	}
	right_portrait = {
		character = scope:challenger
	}
	
	option = {
		name = chivalry.3.a
		
		custom_tooltip = duel_can_go_either_way
		
		hidden_effect = {
			random_list = {
				50 = {
					add_character_flag = {
						flag = enemy_goes_on_offensive
					}
				}
				50 = {
					add_character_flag = {
						flag = you_go_on_offensive
					}
				}
			}
		}
		duel = {
			skill = prowess
			target = scope:challenger
			value = 10
			10 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
					min = -19
				}
				trigger_event = {
					id = chivalry.4
					days = 2
				}
			}
			10 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1
					min = -19
				}
				trigger_event = {
					id = chivalry.5
					days = 2
				}
			}
		}
	}
}

chivalry.4 = {
	type = character_event
	title = chivalry.4.t
	desc = chivalry.4.d
	theme = martial_chivalry_focus
	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = scope:challenger
		animation = severelywounded
	}
	
	option = {
		name = chivalry.4.a
		
		
		root = {
			add_prestige = 50
			knight_increase_prowess_chance_effect = yes
		}
		
		scope:challenger = {
			add_prestige = -50
			increase_wounds_no_death_effect = { REASON = fight }
		}
	}
	
	option = {
		name = chivalry.4.b
		
		
		root = {
			add_prestige = 50
			knight_increase_prowess_chance_effect = yes
			add_tyranny = 5
			add_dread = 10
			change_chivalry_effect = { 
				Chivalry = -2
			}
			custom_tooltip = remove_2_chivalry_tt
		}
		
		scope:challenger = {
			death = {
				killer = root
				REASON = fight
			}
		}
	}
}

chivalry.5 = {
	type = character_event
	title = chivalry.5.t
	desc = chivalry.5.d
	theme = martial_chivalry_focus
	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = scope:challenger
		animation = severelywounded
	}
	
	option = {
		name = chivalry.5.a
		
		
		scope:challenger = {
			add_prestige = 50
			knight_increase_prowess_chance_effect = yes
		}
		
		root = {
			add_prestige = -50
			increase_wounds_no_death_effect = { REASON = fight }
		}
	}
}

chivalry.6 = {
	type = character_event
	title = chivalry.6.t
	desc = chivalry.6.d
	theme = martial_chivalry_focus
	left_portrait = {
		character = root
	}
	
	option = {
		name = chivalry.6.a
		
		change_chivalry_effect = { 
			Chivalry = 1
		}
		custom_tooltip = add_1_chivalry_tt
		
		add_stress = 10
		random_list = {
			50 = {
				knight_increase_prowess_chance_effect = yes
			}
			50 = {
			
			}
		}
	}
	option = {
		name = chivalry.6.b
		
		change_chivalry_effect = { 
			Chivalry = -1
		}
		custom_tooltip = remove_1_chivalry_tt
		
		add_dread = 10
		
		random_list = {
			80 = {
				knight_increase_prowess_chance_effect = yes
			}
			20 = {
			
			}
		}
	}
}

chivalry.7 = {
	type = character_event
	title = chivalry.7.t
	desc = chivalry.7.d
	theme = martial_chivalry_focus
	left_portrait = {
		character = root
	}
	
	option = {
		name = chivalry.7.a
		
		change_chivalry_effect = { 
			Chivalry = 1
		}
		custom_tooltip = add_1_chivalry_tt
		
		random_list = {
			20 = {
				add_trait = unyielding_defender
				add_prestige = 100
			}
			80 = {
				add_prestige = 50
			}
		}
	}
	
	option = {
		name = chivalry.7.b
		
		change_chivalry_effect = { 
			Chivalry = -1
		}
		custom_tooltip = remove_1_chivalry_tt
		
		random_list = {
			20 = {
				add_trait = aggressive_attacker
				add_dread = 30
			}
			80 = {
				add_dread = 10
			}
		}
	}
}

chivalry.8 = {
	type = character_event
	title = chivalry.8.t
	desc = chivalry.8.d
	theme = martial_chivalry_focus
	left_portrait = {
		character = root
	}
	
	right_portrait = {
		character = scope:enemy_commander
	}
	
	immediate = {
		random_side_commander = {
			save_scope_as = enemy_commander
		}
	}
	option = {
		name = chivalry.8.a
		
		change_chivalry_effect = { 
			Chivalry = 1
		}
		custom_tooltip = add_1_chivalry_tt
		
		random_list = {
			20 = {
				add_trait = brave
			}
		}
		
		root = {
			save_scope_as = combatant_2
		}
		scope:enemy_commander = {
			save_scope_as = combatant_1
			trigger_event = {
				id = KoH_duels.3
			}
		}
	}
	
	option = {
		name = chivalry.8.b
		
		change_chivalry_effect = { 
			Chivalry = -1
		}
		custom_tooltip = remove_1_chivalry_tt
		
		add_prestige = -50
		random_list = {
			20 = {
				add_trait = craven
			}
		}
	}
}

chivalry.9 = {
	type = character_event
	title = chivalry.9.t
	desc = chivalry.9.d
	theme = martial_chivalry_focus
	left_portrait = {
		character = root
	}
	trigger = {
		is_landed = yes
	}
	
	immediate = {
		random_held_title = {
			save_scope_as = town_scope
		}
	}
	
	option = {
		name = chivalry.9.a
		
		scope:town_scope = {
			add_province_modifier = {
				modifier = koh_did_not_hunt_beast
				years = 5
			}
		}
	}
	
	option = {
		name = chivalry.9.b
		
		add_martial_skill = 1
		scope:town_scope = {
			add_province_modifier = {
				modifier = koh_mocked_beast
				years = 5
			}
		}
	}
	
	option = {
		name = chivalry.9.c
		
		add_prestige = 100
		change_chivalry_effect = { 
			Chivalry = 1
		}
		custom_tooltip = add_1_chivalry_tt
		custom_tooltip = start_dragon_hunting
		##start event chain here
	}
}

chivalry.10 = {
	type = character_event
	title = chivalry.10.t
	desc = chivalry.10.d
	theme = martial_chivalry_focus
	left_portrait = {
		character = root
	}
	
	immediate = {
		create_character = {
			age = { 20 30 }
			location = scope:town_scope
			gender = male
			faith = this.faith
			culture = this.culture
			dynasty = none
			prowess = { 70 }
			save_scope_as = challenger
        }
	}
	
	option = {
		name = chivalry.10.a
		
		duel = {
			skill = prowess
			target = scope:challenger
			value = 10
			10 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
					min = -19
				}
				trigger_event = {
					id = chivalry.4
					days = 2
				}
			}
			10 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1
					min = -19
				}
				trigger_event = {
					id = chivalry.5
					days = 2
				}
			}
		}
	}
	
	option = {
		name = chivalry.10.b
		
		add_prestige = -1000
		scope:town_scope = {
			add_province_modifier = {
				modifier = koh_did_not_hunt_beast
				years = 5
			}
		}
		change_chivalry_effect = { 
			Chivalry = -5
		}
		custom_tooltip = remove_5_chivalry_tt
	}
}

chivalry.11 = {
	type = character_event
	title = chivalry.11.t
	desc = chivalry.11.d
	theme = martial_chivalry_focus
	left_portrait = {
		character = root
	}

	option = {
		name = chivalry.11.a

		change_chivalry_effect = { 
			Chivalry = 1
		}
		custom_tooltip = add_1_chivalry_tt

		random_list = {
			20 = {
				add_trait = kind
			}
		}

		add_dread = -10
		add_prestige = -100
	}

	option = {
		name = chivalry.11.b

		add_prestige = 50
		add_piety = 50
	}
}

chivalry.12 = {
	type = character_event
	title = chivalry.12.t
	desc = chivalry.12.d
	theme = martial_chivalry_focus
	left_portrait = {
		character = root
	}
	
	immediate = {
		set_variable = {
			name = bloodline_founder
			value = root
		}
	}

	option = {
		name = chivalry.12.a

		custom_tooltip = bloodline_1_creator_tooltip
		set_variable = has_bloodline_1
		hidden_effect = {
			add_character_modifier = {
				modifier = bloodline_1_modifier
				days = -1
			}
			every_child = {
				limit = {
					has_dynasty = yes
				}
				set_variable = has_bloodline_1
				add_character_modifier = {
					modifier = bloodline_1_modifier
					days = -1
				}
				set_variable = {
					name = bloodline_founder
					value = root
				}
				trigger_event = {
					id = chivalry.13
				}
			}
		}
	}
}

chivalry.13 = {
	type = character_event
	title = chivalry.13.t
	desc = chivalry.13.d
	theme = martial_chivalry_focus
	
	hidden = yes
	
	trigger = {
		has_variable = has_bloodline_1
	}
	
	immediate = {
		every_child = {
			limit = {
				has_dynasty = yes
			}
			set_variable = has_bloodline_1
			add_character_modifier = {
				modifier = bloodline_1_modifier
				days = -1
			}
			trigger_event = {
				id = chivalry.13
			}
		}
	}
	
	option = {
		name = chivalry.13.a
		
	}
}

chivalry.14 = {
	type = character_event
	title = chivalry.14.t
	desc = chivalry.14.d
	theme = martial_chivalry_focus
	left_portrait = {
		character = root
	}
	
	right_portrait = {
		character = scope:recruiter
	}
	
	immediate = {
        create_character = {
			age = { 25 40 }
			location = root.capital_province
			gender = male
			dynasty = none
			culture = this.culture
			faith = this.faith
			prowess = { 15 25 }
			martial = { 14 30 }
			save_scope_as = recruiter
        }
	}
	
	option = {
		name = chivalry.14.a
		recruit_courtier = scope:recruiter
	}
	
	option = {
		name = chivalry.14.b
		
	}
}